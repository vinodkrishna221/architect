# Frontend Technical Spec: "The Architect" UI

## 1. Overview
This document defines the user interface and client-side logic for "The Architect." The UI must be **Server-First** (RSC by default) but highly interactive in the "Workspace" to support the **Deep-Dive Interrogation** and **Component-Driven Prompt Generation** workflows.

## 2. Tech Stack (Frontend Strict)
*   **Framework:** Next.js 15 (App Router).
*   **Styling:** Tailwind CSS v4 (Mobile-first).
*   **Component Library:** Shadcn/UI (Radix Primitives).
*   **Icons:** Lucide React.
*   **Animation:** Framer Motion (Crucial for the "AI Thinking" and "Question Form" transitions).
*   **Markdown Rendering:** react-markdown with rehype-highlight (for the PRD output).
*   **State Management:** nuqs (URL state management) for tabs/filters, React Context for global session.

## 3. Design System & Theme
*   **Input:** The UI must strictly adhere to the **Design System PRD** (generated by Agent B).
*   **Vibe:** "Linear-style," dark mode default, clean borders, subtle gradients.
*   **Color Palette:** Slate/Zinc (Neutral), Indigo (Primary/Action), Red (Error/Destructive).
*   **Responsive Strategy:**
    *   **Desktop:** Split view (Chat Left | Artifact Right).
    *   **Mobile:** Tabbed view (Toggle between Chat and Artifact).

## 4. Core Page Specifications

### A. Landing / Auth Page (`/page.tsx`)
*   **Type:** Server Component.
*   **Components:** HeroSection, AuthButtons (GitHub/Google).
*   **UX:** Auto-redirect to `/dashboard` if session exists.

### B. Dashboard (`/dashboard/page.tsx`)
*   **Type:** Server Component (RSC).
*   **Components:** ProjectGrid, CreateButton, CreditsDisplay.

### C. The Workspace (`/project/[id]/page.tsx`)
*   **Type:** Client Component Wrapper.
*   **Layout:** ResizablePanel (40% Chat / 60% Artifact).

#### Component 1: ChatInterface.tsx (Left Panel)
*   **State:** Stores list of messages (User + AI).
*   **Deep-Dive Interrogation:**
    *   Must handle **10-30 questions** smoothly.
    *   **Animation:** Use `AnimatePresence` to slide question forms in/out.
*   **Scope Rationalization:**
    *   UI must display "Challenge" messages from Agent A distinctively (e.g., Warning/Alert style).

#### Component 2: ArtifactViewer.tsx (Right Panel)
*   **Tabs:** Must support the full **Blueprint Suite**:
    *   [Design] [Frontend] [Backend] [Security] [Database] [MVP]
*   **Renderer:** `react-markdown`.
*   **Features:**
    *   **Streaming:** Handle real-time text streaming without flickering.
    *   **Copy Button:** "Copy for Cursor" (copies markdown with context).

## 5. Component-Driven Development Strategy
The "Prompt Generation Sequence" requires a specific UI flow:
1.  **Gatekeeper Modal:** A dialog asking "Shall I start writing the implementation prompts?"
2.  **Prompt Stream:** A dedicated view to show the **serialized prompts** (Component by Component) as they are generated.

## 6. Client-Side State Logic (Hooks)
*   **Hook:** `useArtifactStream(projectId)`
    *   Handles SSE or `useChat` stream.
    *   Splits content into the 6 specific PRD tabs based on headers/delimiters.

## 7. Implementation Steps
1.  **Setup UI Libs:** Install Shadcn, Framer Motion, Lucide.
2.  **Build Shell:** DashboardLayout, WorkspaceLayout.
3.  **Build Atoms:** ProjectCard, MessageBubble.
4.  **Build Complex:** QuestionForm (handling 10-30 Qs), ArtifactViewer (6 Tabs).
5.  **Integrate:** Connect ChatInterface to Server Actions.